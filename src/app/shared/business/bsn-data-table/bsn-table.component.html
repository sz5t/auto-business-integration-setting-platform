<div class="table-operations" *ngIf="config.toolbar">
    <ng-container *ngFor="let btn of config.toolbar">
        <button nz-button (click)="toolbarAction(btn)" [attr.disabled]="btn.disabled" class="editable-add-btn">{{btn.text}}</button>
    </ng-container>
</div>
<!-- [nzDataSource]="dataList"nzAjaxData -->
<nz-table #nzTable [nzData]="dataList" [nzSize]="'small'" [nzFrontPagination]="false" [nzShowSizeChanger]="true" [nzTotal]="total"
    [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize" [nzShowTotal]="totalTemplate" [nzPageSizeOptions]="this.config.pageSizeOptions"
    [nzLoading]="loading" (nzPageIndexChange)="searchData()" (nzPageSizeChange)="searchData(true)" [nzTitle]="this.config.title?this.config.title:null"
    nzBordered>
    <ng-template #totalTemplate let-total>
        共 {{total}} 条
    </ng-template>
    <thead>
        <tr>
            <th nzShowCheckbox [(nzChecked)]="allChecked" [nzIndeterminate]="indeterminate" (nzCheckedChange)="checkAll($event)">
            </th>
            <ng-container *ngFor="let col of config.columns">
                <th nzShowSort *ngIf="!col.hidden" nzShowSort nzSortKey="sortMap[col.field]">
                    <span>{{col.title}}</span>
                    <!-- <nz-table-sort [(nzValue)]="sortMap[col.field]" (nzValueChange)="sort(col.field,$event)"></nz-table-sort> -->
                </th>
            </ng-container>

        </tr>
    </thead>
    <tbody>
        <ng-container *ngFor="let data of nzTable.data">
            <tr (click)="selectRow(data, $event)" [ngStyle]="{'background-color':data.selected?'rgb(236, 246, 253)':''}">
                <td nzShowCheckbox [(nzChecked)]="data.checked" (nzCheckedChange)="refChecked()">
                </td>
                <ng-container *ngFor="let col of config.columns">
                    <td *ngIf="!col.hidden">
                        <ng-container *ngIf="col.editor">
                            <div *ngIf="!editCache[data.key].edit">
                                {{data[col.field]}}
                            </div>
                            <ng-container [bsnData]="tempParameters" [rowData]="data" [dataSet]="col.editor.options.dataSet?dataSet[col.editor.options.dataSet]:null"
                                CnGridEditorDirective *ngIf="editCache[data.key].edit" [config]="col.editor.options" [value]="{key:data.key,name:col.editor.field,data:editCache[data.key].data[col.editor.field]}"
                                (updateValue)="valueChange($event)">
                            </ng-container>
                        </ng-container>
                        <ng-container *ngIf="!col.editor">
                            {{data[col.field]}}
                        </ng-container>

                    </td>
                </ng-container>
            </tr>
        </ng-container>

    </tbody>
</nz-table>